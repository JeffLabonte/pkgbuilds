pkgname=python-cheat
_gitname=cheat
pkgver=2.5.1
pkgrel=2
pkgdesc="Create and view interactive cheatsheets on the command-line."
arch=('any')
url="https://github.com/chrisallenlane/cheat"
depends=('python' 'python-docopt' 'python-pygments' 'python-termcolor')
makedepends=('python-setuptools')
optdepends=('bash-completion' 'zsh-completions' 'fish')
license=('GPL3')
provides=("$_gitname")
conflicts=("${_gitname}-git" "${_gitname-bash}-git" "ruby-${_gitname}")
source=($pkgname-$pkgver.tar.gz::"https://github.com/chrisallenlane/$_gitname/archive/$pkgver.tar.gz")
sha256sums=('9ae44cfc79478a7ba604871f3253e176f2bf3e1a4e698c9466e58a39d279effd')

build() {
	cd "$_gitname-$pkgver"
	python setup.py build
}

package() {
	cd "$_gitname-$pkgver"
	python setup.py install --root="$pkgdir/" --optimize=1
	install -dm755 "$pkgdir/"usr/share/{bash-completion/completions,zsh/site-functions,fish/completions}
	install -m 644 "$srcdir/$_gitname-$pkgver/$_gitname/autocompletion/$_gitname.bash" \
			"$pkgdir/usr/share/bash-completion/completions/$_gitname"
	install -m 644 "$srcdir/$_gitname-$pkgver/$_gitname/autocompletion/$_gitname.zsh" \
			"$pkgdir/usr/share/zsh/site-functions/_${_gitname}"
	install -m 644 "$srcdir/$_gitname-$pkgver/$_gitname/autocompletion/$_gitname.fish" \
			"$pkgdir/usr/share/fish/completions/$_gitname"
}

