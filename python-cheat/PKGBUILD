pkgname=python-cheat
_gitname=cheat
pkgver=2.5.0
pkgrel=1
pkgdesc="Create and view interactive cheatsheets on the command-line."
arch=('any')
url="https://github.com/chrisallenlane/$_gitname"
depends=('python' 'python-docopt' 'python-pygments' 'python-termcolor')
makedepends=('python-setuptools')
optdepends=('bash-completion' 'zsh-completions' 'fish')
license=('GPL3')
provides=("$_gitname")
conflicts=("$_gitname-git" "$_gitname-bash-git")
source=($pkgname-$pkgver.tar.gz::"https://github.com/chrisallenlane/$_gitname/archive/$pkgver.tar.gz")
sha256sums=('154379dc3dadb23e270418754c264e4080aba1a4f621d26b3b4abeed71d1d6c9')

build() {
	cd "$_gitname-$pkgver"
	python setup.py build
}

package() {
	cd "$_gitname-$pkgver"
	python setup.py install --root="$pkgdir/" --optimize=1
	install -dm755 "$pkgdir/"usr/share/{bash-completion/completions,zsh/site-functions,fish/completions}
	install -m 644 "$srcdir/$_gitname-$pkgver/$_gitname/autocompletion/$_gitname.bash" "$pkgdir/usr/share/bash-completion/completions/$_gitname"
	install -m 644 "$srcdir/$_gitname-$pkgver/$_gitname/autocompletion/$_gitname.zsh" "$pkgdir/usr/share/zsh/site-functions/$_gitname"
	install -m 644 "$srcdir/$_gitname-$pkgver/$_gitname/autocompletion/$_gitname.fish" "$pkgdir/usr/share/fish/completions/$_gitname"
}

