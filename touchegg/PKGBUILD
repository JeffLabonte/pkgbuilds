# https://aur.archlinux.org/packages/touchegg
groups=('modified')

pkgname=touchegg
pkgver=2.0.4
pkgrel=2
pkgdesc="Multitouch gesture recognizer"
arch=('i686' 'x86_64')
url="https://github.com/JoseExposito/touchegg"
license=('GPL')
depends=('systemd-libs' 'libinput' 'pugixml' 'cairo' 'libx11' 'libxtst' 'libxrandr')
makedepends=('cmake')
install="$pkgname.install"
source=("$pkgname-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz")
sha256sums=('efc079545741e077eea6102faa7ab87820358380d996b1766f2fa8eb9fe3ab44')

build() {
	cmake -B build -S "$pkgname-$pkgver" \
		-DCMAKE_BUILD_TYPE=None \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-Wno-dev
	make -C build
}

package() {
	make -C build DESTDIR="$pkgdir" install

	[ -d "$pkgdir/lib" ] && mv "$pkgdir/lib" "$pkgdir/usr/lib"
	
	install -Dm644 "$pkgname-$pkgver/installation/touchegg.desktop" -t \
		"$pkgdir/etc/xdg/autostart"
}
