pkgname=gamehub
_gitname=GameHub
pkgver=0.13.1.1
_projectver=0.13.1
_buildver=1
_gitbranch=master
pkgrel=1
pkgdesc="Games manager/downloader/library written in Vala that supports GOG, Steam and Humble Bundle"
arch=('any')
url="https://tkashkin.tk/projects/gamehub"
license=('GPL3')
depends=('granite' 'gtk3' 'glib2' 'webkit2gtk' 'json-glib' 'libgee' 'libsoup' 'sqlite' 'libxml2' 'polkit' 'libx11' 'libmanette' 'libxtst')
makedepends=('meson' 'ninja' 'vala')
optdepends=('lib32-json-glib' 'file-roller' 'innoextract' 'wine' 'dosbox' 'steam' 'retroarch')
conflicts=('gamehub-git')
source=("$_gitname-$_projectver-$_buildver-$_gitbranch.tar.gz"::https://github.com/tkashkin/$_gitname/archive/$_projectver-$_buildver-$_gitbranch.tar.gz)
md5sums=('c5cb288a1160fbcc49fa9f14c140f5a4')

build() {
	cd "$_gitname-$_projectver-$_buildver-$_gitbranch"
	meson . _build --prefix=/usr --buildtype=debug -Ddistro=arch
    unset CFLAGS
		unset CXXFLAGS
		unset CPPFLAGS
	ninja -C _build
}

package() {
	cd "$_gitname-$_projectver-$_buildver-$_gitbranch"
	DESTDIR="$pkgdir" ninja -C _build install
	ln -s com.github.tkashkin.$pkgname $pkgdir/usr/bin/$pkgname
}
