# Maintainer: Stefano Capitani <stefanoatmanjarodotorg>

pkgname=plane-theme
pkgver=1.7
pkgrel=1
_commit=d65092e070c5a063982cd8f24f3bfc6e0b1f048e
pkgdesc='A beautiful theme for Gnome Linux'
arch=('any')
url="https://github.com/wfpaisa/$pkgname"
license=('GPL')
source=("$pkgname-$_commit.tar.gz::$url/archive/$_commit.tar.gz")

sha256sums=('d65a5d865b43ff01ac6da391da493703ae977dc43ce16d8b92150a02a1a18566')
makedepends=('npm' 'gulp')

pkgver() {
	cd $pkgname-$_commit
	awk '/const version =/ {print $4}' gulpfile.js | cut -d "'" -f2
}

build() {
	cd $pkgname-$_commit
	npm install gulp gulp-zip del gulp-rename gulp-sass gulp-watch
	npm audit fix
	gulp

}


package() {
	install -dm 755 $pkgdir/usr/share/themes
	cd $srcdir/$pkgname-$_commit/build
	cp -r Plane $pkgdir/usr/share/themes/Plane
	cp -r Plane-dark $pkgdir/usr/share/themes/Plane-dark
}

