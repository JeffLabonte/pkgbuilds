pkgname=pennywise-bin
_pkgname=pennywise
pkgver=0.7.0
pkgrel=1
pkgdesc="Cross-platform application to open any website or media in a floating window"
arch=('x86_64')
url="https://github.com/kamranahmedse/pennywise"
license=('MIT')
depends=('gconf' 'libnotify' 'libappindicator-gtk2' 'libxtst' 'nss' 'libxss')
makedepends=('yarn')
provides=($_pkgname)
conflicts=($_pkgname)
source=("https://github.com/kamranahmedse/$_pkgname/releases/download/v$pkgver/${_pkgname}_${pkgver}_amd64.deb"
		"https://raw.githubusercontent.com/kamranahmedse/$_pkgname/master/license.md")
sha256sums=('aa2d135218915dcd22f72bd0c209f64856de9dc022b7801c8d59973fddc88110'
            'b41ccd76edcf9e9af64581622b1d6dc1de7ed55a96548c4af8c43d32cd764b0b')

prepare() {
	bsdtar -xvf data.tar.xz
}

package() {
	install -d $pkgdir/{opt,usr/bin,usr/share/icons/hicolor}
	cp -r opt/* $pkgdir/opt/
	ln -s $pkgdir/opt/Pennywise/$_pkgname $pkgdir/usr/bin/$_pkgname
	install -Dm644 usr/share/applications/$_pkgname.desktop $pkgdir/usr/share/applications/$_pkgname.desktop
	cp -a usr/share/icons/hicolor/. $pkgdir/usr/share/icons/hicolor/
	install -Dm644 license.md $pkgdir/usr/share/licenses/$_pkgname/license.md
}
