From ae35b8da224b7ba163ebc1b3cf94acc2b0da260b Mon Sep 17 00:00:00 2001
From: Anonymous <>
Date: Sun, 12 May 2019 12:45:44 +0900
Subject: [PATCH] Fix compilation on kernels >= 5.1

---
 binder/binder.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/binder/binder.c b/binder/binder.c
index a9d04b2..d3829a0 100644
--- a/binder/binder.c
+++ b/binder/binder.c
@@ -3391,7 +3391,9 @@ static void binder_vma_close(struct vm_area_struct *vma)
 	binder_defer_work(proc, BINDER_DEFERRED_PUT_FILES);
 }
 
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 11, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(5, 1, 0)
+static vm_fault_t binder_vm_fault(struct vm_fault *vmf)
+#elif LINUX_VERSION_CODE >= KERNEL_VERSION(4, 11, 0)
 static int binder_vm_fault(struct vm_fault *vmf)
 #else
 static int binder_vm_fault(struct vm_area_struct *vma, struct vm_fault *vmf)
