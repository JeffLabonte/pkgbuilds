pkgname=mcfly
pkgver=0.3.4
pkgrel=1
pkgdesc="Fly through your shell history"
arch=('i686' 'x86_64')
url="https://github.com/cantino/mcfly"
license=('MIT')
depends=('sh')
makedepends=('rust')
install="$pkgname.install"
source=("$pkgname-$pkgver.tar.gz::https://github.com/cantino/$pkgname/archive/v$pkgver.tar.gz")
sha256sums=('81476c6893ce1214831d7829148e9dfb0a9a3e1b892d4b39fdb9e861ad280d39')

build() {
	cd "$pkgname-$pkgver"
	env CARGO_INCREMENTAL=0 cargo build --release
}

package() {
	cd "$pkgname-$pkgver"
	install -Dm755 target/release/mcfly $pkgdir/usr/bin/$pkgname
	install -Dm644 mcfly.bash $pkgdir/usr/share/doc/mcfly/$pkgname.bash
	install -Dm644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
