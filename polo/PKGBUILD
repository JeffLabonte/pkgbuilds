pkgname=polo
pkgver=18.8.2
_pkgver=18.8-beta
pkgrel=1
pkgdesc="Advanced file manager for Linux written in Vala."
arch=('any')
url="https://github.com/teejee2008/polo"
license=('GPL')
depends=('libgee' 'gtk3' 'vte3' 'rsync' 'p7zip' 'gvfs' 'wget')
makedepends=('vala')
optdepends=('clamscan' 'fish' 'ffmpeg' 'qemu' 'mediainfo' 'imagemagick' 'diffuse' 'perl-image-exiftool' 'gnome-disk-utility' 'ghostscript' 'lzop' 'pdftk' 'pngcrush' 'pv' 'rclone' 'udisks2' 'xdg-utils' 'youtube-dl' 'polo-donation-plugins')
source=($pkgname-$pkgver.tar.gz::"$url/archive/v$_pkgver.tar.gz")
md5sums=('e260c26ce6348328fb472512da61f37d')

prepare() {
	cd "$pkgname-$_pkgver/src/Gtk"
	sed -i 's/term.feed_child(cmd, -1);/term.feed_child(cmd.to_utf8());/g' TermBox.vala
}

build() {
	cd "$pkgname-$_pkgver"
	make
}

package() {
	cd "$_pkgname-$_pkgver"
	make DESTDIR="$pkgdir/" install
#	ln -s /usr/bin/polo-gtk "${pkgdir}"/usr/bin/polo
#	rm "${pkgdir}"/usr/bin/polo-uninstall
}
