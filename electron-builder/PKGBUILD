pkgname=electron-builder
pkgver=20.19.2
pkgrel=1
pkgdesc="A complete solution to package and build a ready for distribution Electron app with “auto update” support out of the box"
arch=(any)
url="https://www.electron.build/"
license=('MIT')
makedepends=('npm')
source=("https://github.com/electron-userland/$pkgname/archive/v$pkgver.tar.gz")
md5sums=('a1bc62611bf02b0af01427de0ddf90b3')

package() {
    cd $srcdir/$pkgname-$pkgver
    npm install -g --user root --prefix "$pkgdir"/usr
    # Non-deterministic race in npm gives 777 permissions to random directories.
    # See https://github.com/npm/npm/issues/9359 for details.
    find "${pkgdir}"/usr -type d -exec chmod 755 {} +
}
